(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e1d31"],{"7ba1":function(t,o,e){"use strict";e.r(o);var a=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("h2",[t._v("商户管理")]),e("a-row",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"flex"}},[e("a-col",{staticStyle:{width:"100%",display:"flex"}},[e("a-button",{attrs:{type:"primary"},on:{click:t.popShop}},[t._v("添加商户")])],1)],1),e("s-table",{ref:"table",attrs:{bordered:"",size:"default","row-key":"id",columns:t.columns,data:t.loadData},scopedSlots:t._u([{key:"action",fn:function(o){return[e("a-button",{attrs:{type:"link"},on:{click:function(e){return t.toDelete(o.id)}}},[t._v("删除")])]}}])}),e("a-modal",{attrs:{title:"添加商户",width:"60%",okButtonProps:{props:{loading:t.submitLoading}}},on:{ok:t.handleSubmit},model:{value:t.shopVisible,callback:function(o){t.shopVisible=o},expression:"shopVisible"}},[e("a-spin",{attrs:{spinning:t.modalLoading}},[e("a-form",[e("a-form-item",{attrs:{label:"手机"}},[e("a-input",{model:{value:t.form.phone,callback:function(o){t.$set(t.form,"phone",o)},expression:"form.phone"}})],1),e("a-form-item",{attrs:{label:"密码"}},[e("a-input",{model:{value:t.form.password,callback:function(o){t.$set(t.form,"password",o)},expression:"form.password"}})],1),e("a-form-item",{attrs:{label:"名字"}},[e("a-input",{model:{value:t.form.name,callback:function(o){t.$set(t.form,"name",o)},expression:"form.name"}})],1),e("a-form-item",{attrs:{label:"logo"}},[e("a-upload",{staticClass:"avatar-uploader",attrs:{name:"file","list-type":"picture-card","show-upload-list":!1,action:t.uploadPrefix+"/upload"},on:{change:t.handleLogoChange}},[t.form.logo?e("div",{staticClass:"bg_img cover_img",style:"background-image: url("+t.imgPrefix+t.form.logo+");"}):e("div",[e("a-icon",{attrs:{type:t.logoLoading?"loading":"plus"}}),e("div",{staticClass:"ant-upload-text"},[t._v(" Upload ")])],1)])],1)],1)],1)],1)],1)},i=[],n=(e("d3b7"),e("5530")),s=e("ab09"),l=e("2f62"),r=function(){return{keyword:""}},d=function(){return{phone:"",password:"",name:"",logo:""}},c={components:{STable:s["a"]},data:function(){var t=this,o=[{title:"id",dataIndex:"id"},{title:"手机号码",dataIndex:"phone"},{title:"商户名称",dataIndex:"shop.name"},{title:"操作",scopedSlots:{customRender:"action"}}];return{columns:o,searchParams:r(),form:d(),shopVisible:!1,submitLoading:!1,modalLoading:!1,logoLoading:!1,proxy:"/apeces/admin",prefix:"/",imgPrefix:"/apeces_file",uploadPrefix:"/apeces",loadData:function(o){return t.getShopList(o)}}},methods:Object(n["a"])(Object(n["a"])({},Object(l["b"])("shop",{getShopList:"getList",addShop:"add",deleteShop:"delete"})),{},{toEdit:function(t){},toDelete:function(t){var o=this;this.$confirm({content:"你确定要删除这个商户？",okText:"确认",cancelText:"取消",onOk:function(){o.deleteShop(t).then((function(t){o.$refs.table.refresh(!0)}))}})},popShop:function(){this.shopVisible=!0},handleLogoChange:function(t){var o=t.file;"uploading"===o.status&&(this.form.logo="",this.logoLoading=!0),"done"===o.status&&(this.form.logo=o.response.data,this.logoLoading=!1)},handleSubmit:function(){var t=this;this.submitLoading=!0,this.addShop(this.form).then((function(){t.$message.success("添加成功"),t.$refs.table.refresh(!0),t.shopVisible=!1})).finally((function(){t.submitLoading=!1}))}})},p=c,u=e("2877"),f=Object(u["a"])(p,a,i,!1,null,null,null);o["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d0e1d31.f73078ca.js.map