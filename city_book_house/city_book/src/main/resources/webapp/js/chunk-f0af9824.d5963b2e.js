(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0af9824"],{"0291":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manage"},[a("div",{staticClass:"nav"},[a("a-breadcrumb",[a("a-breadcrumb-item",[e._v("人员管理")]),a("a-breadcrumb-item",[e._v("管理员管理")])],1)],1),a("div",{staticClass:"serch_field"},[a("a-form-model",{attrs:{layout:"inline"}},[a("a-form-model-item",{staticStyle:{width:"100%"}},[a("a-form-model-item",{attrs:{label:"用户状态"}},[a("a-select",{staticStyle:{width:"150px"},attrs:{options:e.status},model:{value:e.params.status,callback:function(t){e.$set(e.params,"status",t)},expression:"params.status"}})],1),a("a-form-model-item",[a("a-input",{staticStyle:{width:"220px"},attrs:{placeholder:"请输入管理员名称"},model:{value:e.params.content,callback:function(t){e.$set(e.params,"content",t)},expression:"params.content"}})],1),a("a-button",{staticStyle:{"margin-right":"12px"},attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")]),a("a-button",{on:{click:e.reset}},[e._v("重置")])],1),a("div",{staticStyle:{display:"flex","justify-content":"space-between",padding:"12px 0"}},[a("a-form-model-item",[a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:e.toCreateManager}},[e._v("创建管理员")]),a("a-button",{attrs:{type:"primary"},on:{click:e.viewRecord}},[e._v("操作记录")])],1),a("a-form-model-item",[a("a-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary"},on:{click:function(t){return e.banManager(e.selectedRowKeys,1)}}},[e._v("批量启用")]),a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.banManager(e.selectedRowKeys,2)}}},[e._v("批量禁用")])],1)],1)],1)],1),a("s-table",{ref:"table",attrs:{bordered:"",size:"default","row-key":"id",columns:e.columns,data:e.loadData,"row-selection":{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"gender",fn:function(t){return[e._v(" "+e._s(1===t.gender?"男":"女")+" ")]}},{key:"status",fn:function(t){return[e._v(" "+e._s(1===t.status?"正常":"已禁用")+" ")]}},{key:"action",fn:function(t){return[a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.viewManagerDetail(t.id)}}},[e._v("查看")]),a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.banManager(t)}}},[e._v(e._s(1===t.status?"禁用":"启用"))]),a("a-button",{attrs:{type:"link"},on:{click:function(a){return e.deleteManager(t.id)}}},[e._v("删除")])]}}])}),a("a-modal",{attrs:{title:"创建管理员",width:"50%"},on:{ok:e.createManager},model:{value:e.createManagerVisible,callback:function(t){e.createManagerVisible=t},expression:"createManagerVisible"}},[a("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"账号"}},[a("a-input",{model:{value:e.createParams.account,callback:function(t){e.$set(e.createParams,"account",t)},expression:"createParams.account"}})],1),a("a-form-model-item",{attrs:{label:"姓名"}},[a("a-input",{model:{value:e.createParams.name,callback:function(t){e.$set(e.createParams,"name",t)},expression:"createParams.name"}})],1),a("a-form-model-item",{attrs:{label:"性别"}},[a("a-select",{attrs:{options:e.gender},model:{value:e.createParams.gender,callback:function(t){e.$set(e.createParams,"gender",t)},expression:"createParams.gender"}})],1),a("a-form-model-item",{attrs:{label:"手机号码"}},[a("a-input",{model:{value:e.createParams.phone,callback:function(t){e.$set(e.createParams,"phone",t)},expression:"createParams.phone"}})],1)],1)],1),a("a-modal",{attrs:{title:"查看管理员",width:"50%",footer:null},model:{value:e.viewManagerVisible,callback:function(t){e.viewManagerVisible=t},expression:"viewManagerVisible"}},[a("a-form-model",{attrs:{"label-col":{span:4},"wrapper-col":{span:18}}},[a("a-form-model-item",{attrs:{label:"账号"}},[a("div",[e._v(e._s(e.managerDetail.account))])]),a("a-form-model-item",{attrs:{label:"姓名"}},[a("div",[e._v(e._s(e.managerDetail.name))])]),a("a-form-model-item",{attrs:{label:"头像"}},[e.managerDetail.avatar?a("div",{staticClass:"avatar_container",style:"background-image: url("+e.proxyPrefix+"/cbh_file/"+e.managerDetail.avatar+")"}):a("div",[e._v("暂时没有头像")])]),a("a-form-model-item",{attrs:{label:"性别"}},[a("div",[e._v(e._s(e.managerDetail.gender))])]),a("a-form-model-item",{attrs:{label:"手机号码"}},[a("div",[e._v(e._s(e.managerDetail.phone))])])],1)],1)],1)},r=[],i=a("2909"),o=a("5530"),s=a("ab09"),c=a("2f62"),l={name:"Manager",components:{STable:s["a"]},data:function(){var e=this,t={status:"",content:""},a={account:"",name:"",gender:1,phone:""},n=[{title:"账号",dataIndex:"account"},{title:"姓名",dataIndex:"name"},{title:"性别",scopedSlots:{customRender:"gender"}},{title:"手机",dataIndex:"phone"},{title:"用户状态",scopedSlots:{customRender:"status"}},{title:"操作",width:"250px",scopedSlots:{customRender:"action"}}];return{params:t,columns:n,createParams:a,createManagerVisible:!1,viewManagerVisible:!1,loadData:function(t){return e.getManagerList(Object.assign({},e.params,t))},proxyPrefix:"/city_book",selectedRowKeys:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])("manager",["managerList","managerDetail"])),{},{status:function(){return[{label:"全部",value:""},{label:"正常",value:1},{label:"已禁用",value:2}]},gender:function(){return[{label:"男",value:1},{label:"女",value:2}]}}),methods:Object(o["a"])(Object(o["a"])({},Object(c["b"])("manager",{getManagerList:"getManagerList",addManager:"addManager",getManagerDetail:"getManagerDetail",delManager:"deleteManager",ban:"ban"})),{},{toCreateManager:function(){this.createManagerVisible=!0},createManager:function(){var e=this;this.addManager(this.createParams).then((function(t){e.createManagerVisible=!1,e.$message.success("创建成功")}))},viewManagerDetail:function(e){var t=this;this.getManagerDetail(e).then((function(e){t.viewManagerVisible=!0}))},banManager:function(e,t){var a=this,n=[];e instanceof Array?n=Object(i["a"])(e):(n.push(e.id),t=1===e.status?2:1),this.ban({id:n,status:t}).then((function(e){a.$message.success("操作成功"),a.$refs.table.refresh(!0)}))},search:function(){this.$refs.table.refresh(!0)},deleteManager:function(e){var t=this;this.delManager(e).then((function(e){t.$refs.table.refresh(!0),t.$message.success("删除成功")})).catch((function(e){t.$message.error("删除失败")}))},viewRecord:function(){this.$router.push({name:"Manager Record"})},reset:function(){this.params={status:"",content:""},this.$refs.table.refresh(!0)},onSelectChange:function(e){this.selectedRowKeys=e}})},u=l,f=(a("e677"),a("2877")),d=Object(f["a"])(u,n,r,!1,null,"7794140c",null);t["default"]=d.exports},"159b":function(e,t,a){var n=a("da84"),r=a("fdbc"),i=a("17c2"),o=a("9112");for(var s in r){var c=n[s],l=c&&c.prototype;if(l&&l.forEach!==i)try{o(l,"forEach",i)}catch(u){l.forEach=i}}},"17c2":function(e,t,a){"use strict";var n=a("b727").forEach,r=a("a640"),i=a("ae40"),o=r("forEach"),s=i("forEach");e.exports=o&&s?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},2532:function(e,t,a){"use strict";var n=a("23e7"),r=a("5a34"),i=a("1d80"),o=a("ab13");n({target:"String",proto:!0,forced:!o("includes")},{includes:function(e){return!!~String(i(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},2638:function(e,t,a){"use strict";function n(){return n=Object.assign||function(e){for(var t,a=1;a<arguments.length;a++)for(var n in t=arguments[a],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},n.apply(this,arguments)}var r=["attrs","props","domProps"],i=["class","style","directives"],o=["on","nativeOn"],s=function(e){return e.reduce((function(e,t){for(var a in t)if(e[a])if(-1!==r.indexOf(a))e[a]=n({},e[a],t[a]);else if(-1!==i.indexOf(a)){var s=e[a]instanceof Array?e[a]:[e[a]],l=t[a]instanceof Array?t[a]:[t[a]];e[a]=s.concat(l)}else if(-1!==o.indexOf(a))for(var u in t[a])if(e[a][u]){var f=e[a][u]instanceof Array?e[a][u]:[e[a][u]],d=t[a][u]instanceof Array?t[a][u]:[t[a][u]];e[a][u]=f.concat(d)}else e[a][u]=t[a][u];else if("hook"==a)for(var p in t[a])e[a][p]=e[a][p]?c(e[a][p],t[a][p]):t[a][p];else e[a]=t[a];else e[a]=t[a];return e}),{})},c=function(e,t){return function(){e&&e.apply(this,arguments),t&&t.apply(this,arguments)}};e.exports=s},4160:function(e,t,a){"use strict";var n=a("23e7"),r=a("17c2");n({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})},"4de4":function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").filter,i=a("1dde"),o=a("ae40"),s=i("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},5530:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b");var n=a("ade3");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var n=a("1d80"),r=a("5899"),i="["+r+"]",o=RegExp("^"+i+i+"*"),s=RegExp(i+i+"*$"),c=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(o,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},7156:function(e,t,a){var n=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var i,o;return r&&"function"==typeof(i=t.constructor)&&i!==a&&n(o=i.prototype)&&o!==a.prototype&&r(e,o),e}},a9e3:function(e,t,a){"use strict";var n=a("83ab"),r=a("da84"),i=a("94ca"),o=a("6eeb"),s=a("5135"),c=a("c6b6"),l=a("7156"),u=a("c04e"),f=a("d039"),d=a("7c73"),p=a("241c").f,g=a("06cf").f,h=a("9bf2").f,b=a("58a8").trim,m="Number",v=r[m],y=v.prototype,O=c(d(y))==m,w=function(e){var t,a,n,r,i,o,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=b(l),t=l.charCodeAt(0),43===t||45===t){if(a=l.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(i=l.slice(2),o=i.length,s=0;s<o;s++)if(c=i.charCodeAt(s),c<48||c>r)return NaN;return parseInt(i,n)}return+l};if(i(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var S,P=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof P&&(O?f((function(){y.valueOf.call(a)})):c(a)!=m)?l(new v(w(t)),a,P):w(t)},j=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;j.length>x;x++)s(v,S=j[x])&&!s(P,S)&&h(P,S,g(v,S));P.prototype=y,y.constructor=P,o(r,m,P)}},ab09:function(e,t,a){"use strict";a("99af"),a("4160"),a("caad"),a("d81d"),a("b0c0"),a("a9e3"),a("b64b"),a("2532"),a("159b");var n=a("2638"),r=a.n(n),i=a("53ca"),o=a("5530"),s=a("372e");t["a"]={data:function(){return{localLoading:!1,localDataSource:[],localPagination:Object.assign({},this.pagination)}},props:Object.assign({},s["a"].props,{rowKey:{type:[String,Function],default:"key"},data:{type:Function,required:!0},pageNum:{type:Number,default:1},pageSize:{type:Number,default:10},showSizeChanger:{type:Boolean,default:!0},size:{type:String,default:"default"},alert:{type:[Object,Boolean],default:null},rowSelection:{type:Object,default:null},showAlertInfo:{type:Boolean,default:!1},showPagination:{type:String|Boolean,default:"auto"},pageURI:{type:Boolean,default:!1}}),watch:{"localPagination.current":function(e){this.pageURI&&this.$router.push(Object(o["a"])(Object(o["a"])({},this.$route),{},{name:this.$route.name,params:Object.assign({},this.$route.params,{pageNo:e})}))},pageNum:function(e){Object.assign(this.localPagination,{current:e})},pageSize:function(e){Object.assign(this.localPagination,{pageSize:e})},showSizeChanger:function(e){Object.assign(this.localPagination,{showSizeChanger:e})}},created:function(){var e=this.$route.params.pageNo,t=this.pageURI&&e&&parseInt(e)||this.pageNum;this.localPagination=["auto",!0].includes(this.showPagination)&&Object.assign({},this.localPagination,{current:t,pageSize:this.pageSize,showSizeChanger:this.showSizeChanger})||!1,this.loadData()},methods:{refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.localPagination=Object.assign({},{current:1,pageSize:this.pageSize})),this.loadData()},loadData:function(e,t,a){var n=this;this.localLoading=!0;var r=Object.assign({offset:10*(Number(e&&e.current||this.showPagination&&this.localPagination.current)-1)||10*(Number(this.pageNum)-1),limit:e&&e.pageSize||this.showPagination&&this.localPagination.pageSize||this.pageSize},a&&a.field&&{sortField:a.field}||{},a&&a.order&&{sortOrder:a.order}||{},Object(o["a"])({},t)),s=this.data(r);"object"!==Object(i["a"])(s)&&"function"!==typeof s||"function"!==typeof s.then||s.then((function(t){if(n.localPagination=n.showPagination&&Object.assign({},n.localPagination,{current:r.offset/10+1,total:t.total,showSizeChanger:n.showSizeChanger,pageSize:e&&e.pageSize||n.localPagination.pageSize})||!1,t.list&&0===t.list.length&&n.showPagination&&n.localPagination.current>1)return n.localPagination.current--,void n.loadData();try{["auto",!0].includes(n.showPagination)&&t.totalCount<=t.pageNo*n.localPagination.pageSize&&(n.localPagination.hideOnSinglePage=!0)}catch(a){n.localPagination=!1}n.localDataSource=t.list||t,n.localLoading=!1}))},initTotalList:function(e){var t=[];return e&&e instanceof Array&&e.forEach((function(e){e.needTotal&&t.push(Object(o["a"])(Object(o["a"])({},e),{},{total:0}))})),t}},render:function(){var e=this,t=arguments[0],a={},n=Object.keys(this.$data);Object.keys(s["a"].props).forEach((function(t){var r="local".concat(t.substring(0,1).toUpperCase()).concat(t.substring(1));return n.includes(r)?(a[t]=e[r],a[t]):(e[t]&&(a[t]=e[t]),a[t])}));var i=t("a-table",r()([{},{props:a,scopedSlots:Object(o["a"])({},this.$scopedSlots)},{on:{change:this.loadData,expand:function(t,a){e.$emit("expand",t,a)}}}]),[Object.keys(this.$slots).map((function(a){return t("template",{slot:a},[e.$slots[a]])}))]);return t("div",{class:"table-wrapper"},[i])}}},ab13:function(e,t,a){var n=a("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},ade3:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))},b64b:function(e,t,a){var n=a("23e7"),r=a("7b0b"),i=a("df75"),o=a("d039"),s=o((function(){i(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return i(r(e))}})},caad:function(e,t,a){"use strict";var n=a("23e7"),r=a("4d64").includes,i=a("44d2"),o=a("ae40"),s=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:!s},{includes:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i("includes")},d81d:function(e,t,a){"use strict";var n=a("23e7"),r=a("b727").map,i=a("1dde"),o=a("ae40"),s=i("map"),c=o("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(e,t,a){var n=a("23e7"),r=a("83ab"),i=a("56ef"),o=a("fc6a"),s=a("06cf"),c=a("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(e){var t,a,n=o(e),r=s.f,l=i(n),u={},f=0;while(l.length>f)a=r(n,t=l[f++]),void 0!==a&&c(u,t,a);return u}})},e439:function(e,t,a){var n=a("23e7"),r=a("d039"),i=a("fc6a"),o=a("06cf").f,s=a("83ab"),c=r((function(){o(1)})),l=!s||c;n({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(i(e),t)}})},e677:function(e,t,a){"use strict";a("ffa7")},ffa7:function(e,t,a){}}]);
//# sourceMappingURL=chunk-f0af9824.d5963b2e.js.map